
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>�ʼ�-Node.js�еĺ���API֮HTTP | 张小伦爱学习</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="张小伦爱学习">
    
    <meta name="description" content="��������ѧϰNode����ͼ���ݽ��˻�������Node���飬ͬʱ�����ϲ������ϣ������ջ񣬵��������о���Node�����⻹��ͣ����һ����ģ�����ɵ�״̬������Node�е�ģ�飬ƽʱ��ϰ�ͽӴ�����ô������������һЩģ����ʱֻ����ѧϰ��ʱ���Ӵ����������ñ��ͻķ��ˡ�����ν�ü��Ĳ����ñ�ͷ�������ʼǻ��Ǹ������������ͼ��䡣�Լ������ܽ�Ҳ������ͷ��ϰ�����Ծ���̤������������֮�á���">
    
    
    
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.svg" alt="张小伦爱学习" title="张小伦爱学习"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="张小伦爱学习">张小伦爱学习</a></h1>
				<h2 class="blog-motto">勿忘初心  方得始终</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives">存档</a></li>
					
						<li><a href="http://ncuey.sinaapp.com/CrispElite/">关于</a></li>
					
						<li><a href="https://github.com/zhanglun">Github</a></li>
					
					<li>
					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:zhanglun.github.io/">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/05/12/笔记—Node.js核心API之HTTP/" title="�ʼ�-Node.js�еĺ���API֮HTTP" itemprop="url">�ʼ�-Node.js�еĺ���API֮HTTP</a>
  </h1>
  <p class="article-author">By
    
      <a href="http://zhanglun.github.io/" title="张小伦爱学习">张小伦爱学习</a>
    </p>
  <p class="article-time">
    <time datetime="2014-05-12T09:36:00.000Z" itemprop="datePublished">5月 12 2014</time>
    更新日期:<time datetime="2014-05-13T08:57:43.000Z" itemprop="dateModified">5月 13 2014</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP������"><span class="toc-number">1.</span> <span class="toc-text">HTTP������</span></a></li><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#http-Server"><span class="toc-number">1.1.</span> <span class="toc-text">http.Server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http-ServerResponse"><span class="toc-number">1.2.</span> <span class="toc-text">http.ServerResponse</span></a></li><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#response-writeHead(statusCode,_[header])"><span class="toc-number">1.2.1.</span> <span class="toc-text">response.writeHead(statusCode, [header])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#response-write(data,_[encoding])"><span class="toc-number">1.2.2.</span> <span class="toc-text">response.write(data, [encoding])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#response-end([data],_[encoding])"><span class="toc-number">1.2.3.</span> <span class="toc-text">response.end([data], [encoding])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Event:’close’"><span class="toc-number">1.2.4.</span> <span class="toc-text">Event:’close’</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Event:’finish’"><span class="toc-number">1.2.5.</span> <span class="toc-text">Event:’finish’</span></a></li></ol></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP�ͻ���"><span class="toc-number">2.</span> <span class="toc-text">HTTP�ͻ���</span></a></li><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#http-request(options,_callback)"><span class="toc-number">2.1.</span> <span class="toc-text">http.request(options, callback)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http-get(options,_callback)"><span class="toc-number">2.2.</span> <span class="toc-text">http.get(options, callback)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http-ClientRequest"><span class="toc-number">2.3.</span> <span class="toc-text">http.ClientRequest</span></a></li></ol>
		</div>
		
		<p>��������ѧϰNode����ͼ���ݽ��˻�������Node���飬ͬʱ�����ϲ������ϣ������ջ񣬵��������о���Node�����⻹��ͣ����һ����ģ�����ɵ�״̬������Node�е�ģ�飬ƽʱ��ϰ�ͽӴ�����ô������������һЩģ����ʱֻ����ѧϰ��ʱ���Ӵ����������ñ��ͻķ��ˡ�����ν�ü��Ĳ����ñ�ͷ�������ʼǻ��Ǹ������������ͼ��䡣�Լ������ܽ�Ҳ������ͷ��ϰ�����Ծ���̤������������֮�á���</p>
<a id="more"></a>

<p>Node�ṩ������API������һЩ�Ƚ���Ҫ����Щ���ĵ�API������NodeӦ�õ�֧�������᲻ͣ���õ����ǡ�</p>
<h2 id="HTTP������">HTTP������</h2>
<p>Node.js�ĺ��Ĺ���֮һ������Ϊweb����������Node�ı�׼�����ṩ��httpģ�飬���з�װ��һ����Ч��HTTP��������һ�����׵�HTTP�ͻ��ˡ�����֮ǰ˵���ģ�Node.js ������Ϊ�������ṩ������������������ Apache��IIS �� HTTP ���������ڽ��� HTTP ������֧�֣����������һ�� HTTP �����󣬱����������׾ٵ�ʵ����վ�ͷ����������ϡ�</p>
<p>Node�е�HTTP�ӿڵı����Ƴɿ���֧������HTTPЭ����ԭ�������������ѵ����ԣ��ر��Ƕ��ںܴ��Ļ��߿���������Ϣ.��Щ�ӿڲ�����ȫ������������(request)����Ӧ(response),�����û�����������(request)����Ӧ(response)��ʹ��������������ʹ��Node�е�HTTP�������ͻ��˹��ܣ������ô�ģ��<code>require(‘http’)</code>��</p>
<blockquote>
<p><a href="http://nodejs.org/api/http.html#http_http" target="_blank">http://nodejs.org/api/http.html#http_http</a>  </p>
<p>In order to support the full spectrum of possible HTTP applications, Node’s HTTP API is very low-level. It deals with stream handling and message parsing only. It parses a message into headers and body but it does not parse the actual headers or the body.</p>
<p>Ϊ����ȫ����֧�ֿ��ܵ�HTTPӦ�ó�����Node�ṩ��HTTP API���ܵײ㡣��ֻ��������������Ϣ����������һ����Ϣ�����ɱ���ͷ�ͱ����壬������������ʵ�ʵı���ͷ�ͱ����塣</p>
</blockquote>
<h3 id="http-Server">http.Server</h3>
<p>����Node������һ���򵥵�HTTP��������</p>
<pre><code>var http=require(<span class="string">"http"</span>);
http.createServer(<span class="keyword">function</span>(<span class="built_in">request</span>,<span class="built_in">response</span>){
    <span class="built_in">response</span>.writeHead(<span class="number">200</span>,{
        <span class="string">"Content-Type"</span>:<span class="string">"text/html"</span>
    });
    <span class="built_in">response</span>.write(<span class="string">"&lt;h1&gt;Hello, CrispElite&lt;/h1&gt;"</span>);
    <span class="built_in">response</span>.<span class="keyword">end</span>(<span class="string">"&lt;p&gt;Bye bye!&lt;/p&gt;"</span>);
}).listen(<span class="number">3000</span>);

console.<span class="built_in">log</span>(<span class="string">"���ķ������Ѿ��𶯣�"</span>);
</code></pre><p>����http.createServer()������һ��http.Server��ʵ������һ�������������˴�������������������������������������������Ӧ������createServer()���صĻ���http.Server��ʵ����������ʽ���á����������У���createServer()֮��ֱ�ӵ�����http.Server��listen()����������3000�˿ڡ�</p>
<p>http.Server��httpģ���е�HTTP���������������̳���EventEmitter������һ���������Լ����¼�����õĵ���<code>request</code>�����ͻ�������������˻����request�¼����������ṩ��������request��response���ص���������ʾ��������Ӧ����Ϣ��createServer(callback)������NodeΪrequest�ṩ��һ�����ݷ������书���Ǵ���һ��HTTP�����󲢽�callback��Ϊreuqest�¼��ļ�����������������������һ��������Ҫ��ʾ��ʹ��request�¼���ʵ�֣���ʵ������ô���£�</p>
<pre><code>var http=require(<span class="string">"http"</span>),
    <span class="built_in">server</span>=<span class="keyword">new</span> http.<span class="built_in">Server</span>();

<span class="built_in">server</span>.<span class="keyword">on</span>(<span class="string">"request"</span>, <span class="keyword">function</span>(<span class="built_in">request</span>,<span class="built_in">response</span>){
    <span class="built_in">response</span>.writeHead(<span class="number">200</span>,{
        <span class="string">"Content-Type"</span>:<span class="string">"text/html"</span>
    });
    <span class="built_in">response</span>.write(<span class="string">"&lt;h1&gt;Hello, CrispElite&lt;/h1&gt;"</span>);
    <span class="built_in">response</span>.<span class="keyword">end</span>(<span class="string">"&lt;p&gt;Bye bye!&lt;/p&gt;"</span>);
});
<span class="built_in">server</span>.listen(<span class="number">3000</span>);

console.<span class="built_in">log</span>(<span class="string">"���ķ������Ѿ��𶯣�"</span>);
</code></pre><h3 id="http-ServerResponse">http.ServerResponse</h3>
<p>http.ServerResponse �Ƿ����󷵻ظ��ͻ��˵���Ϣ��һ����HTTP�������ڲ������Ķ��󣨲������û���������������Ϊ�ڶ����������ݵ�ǰ����˵�� ‘request’ �¼��ļ������С�</p>
<p>http.ServerResponse �кܶ෽������������<a href="http://nodejs.org/api/http.html#http_response_writecontinue" target="_blank">����</a>�������м����Ƚ���Ҫ�ĳ�Ա������</p>
<h4 id="response-writeHead(statusCode,_[header])">response.writeHead(statusCode, [header])</h4>
<p>�������Ŀͻ��˷�����Ӧͷ������������һ������������ֻ�ܵ���һ�Σ����������������Զ�����һ����Ӧͷ��ע�⣬�����ڵ��� end()֮ǰ���á�</p>
<pre><code>    <span class="keyword">var</span> body = <span class="string">'hello world'</span>;
    response.writeHead(<span class="number">200</span>, {
        <span class="string">'Content-Length'</span>: body.length,
        <span class="string">'Content-Type'</span>: <span class="string">'text/plain'</span>
    });
</code></pre><p>Ҫע�����ǣ�Content-Length ���ֽ�Ϊ��λ�������ַ��������������ܹ�����������Ϊ�ַ��� ‘hello world’ ֻ�������ֽ��ַ����������������ڰ�����λ���ı����ַ���Ȼ����Ҫʹ��Buffer.byteLength������ȷ���ڸ���������ʽ�µ��ֽ�����<a href="http://nodejs.org/api/http.html#http_response_writecontinue" target="_blank">ԭ��</a>��</p>
<h4 id="response-write(data,_[encoding])">response.write(data, [encoding])</h4>
<p>�������Ŀͻ��˷�����Ӧ���ݡ�data ������һ�� Buffer �����ַ�������ʾҪ���͵����ݣ��������ַ�������ָ�� encoding��Ĭ���� utf-8���� response.end() ����֮ǰ�����Զ��ε��� write()����һ�ε��� write() ʱ���������ͻ����ı�ͷ��Ϣ�͵�һ���������嵽�ͻ��ˡ��� write() �ڶ��α�����ʱ��Node�������㽫Ҫʹ�������ݣ�Ȼ���Զ�����Ӧ���ݷֿ����͡�Ҳ����˵����Ӧ�����浽���������ĵ�һ���С�<a href="http://nodejs.org/api/http.html#http_response_write_chunk_encoding" target="_blank">ԭ��</a>��</p>
<blockquote>
<p>Returns true if the entire data was flushed successfully to the kernel buffer. Returns false if all or part of the data was queued in user memory. ‘drain’ will be emitted when the buffer is again free.</p>
</blockquote>
<h4 id="response-end([data],_[encoding])">response.end([data], [encoding])</h4>
<p>���ڽ�����Ӧ��֪ͨ�ͻ������еķ����Ѿ����ɡ�����������ѡ������������ write() ������ͬ������������һ�������б��뱻����һ�Σ����������ÿͻ��˽���Զ���ڵȴ�״̬��</p>
<p>http.ServerResponse Ҳ�̳��� EventEmitter ���ڹٷ���API�ĵ��У�Ŀǰ��2015/05/13��ֻ�ṩ�������¼���close��finish��</p>
<h4 id="Event:’close’">Event:’close’</h4>
<p>������ ServerResponse �� end ���������û���ˢ��֮ǰ�����ص������Ѿ�����ֹ��</p>
<h4 id="Event:’finish’">Event:’finish’</h4>
<p>����Ӧ��Ϣ�Ѿ��ɹ�����֮�󴥷� finish �¼���������һ����˵������Ӧ�ı���ͷ�ͱ�����������һ���ֶα��ƽ�������ϵͳ�������紫��ʱ��������<a href="http://nodejs.org/api/http.html#http_event_close_1" target="_blank">ԭ��</a>��</p>
<h2 id="HTTP�ͻ���">HTTP�ͻ���</h2>
<p>httpģ���ṩ���������� <code>http.request</code>��<code>http.get</code>������������Ϊ�ͻ�����HTTP����������������</p>
<h3 id="http-request(options,_callback)">http.request(options, callback)</h3>
<p>����HTTP���󣬽�������������options������һ��������һ���ַ���������options��һ���ַ���, �����Զ�ʹ��url.parse()������callback�������Ļص�������<br>options�ĳ��ò������£�</p>
<ul>
<li>host���������͵��ķ�������������IP��ַ��Ĭ��Ϊ’localhost’��</li>
<li>hostname������֧��url.parse()��hostname��host����һЩ</li>
<li>port��Զ�̷������Ķ˿ڡ�Ĭ��ֵΪ80��</li>
<li>method��ָ��HTTP���󷽷����ַ�����Ĭ��Ϊ’GET’��</li>
<li>path������·����Ĭ��Ϊ’/‘�������в�ѯ�ַ���������Ҫ����������’/index.html?page=12’��</li>
<li>headers����������ͷ�Ķ�����</li>
</ul>
<p><!-- http.request() ����һ�� http.ClientRequest��ʵ��������ʵ����һ����д������������ʹ�� "POST" �����ϴ�һ���ļ� --><br>ʹ�� http.request() ʱ���������� response.end()���Դ���������������������������ʹ������������û���κ����ݡ�</p>
<h3 id="http-get(options,_callback)">http.get(options, callback)</h3>
<p>��Ϊ�󲿷���������û��������GET���������� Node �ṩ�����򷽱��ķ��������� http.request() Ψһ�����������Զ���������ΪGET������ͬʱ�Զ����� response.end()��</p>
<pre><code>http.<span class="keyword">get</span>(<span class="string">"http://www.google.com/index.html"</span>, <span class="function"><span class="keyword">function</span><span class="params">(res)</span> {</span>
    console.log(<span class="string">"Got response: "</span> + res.statusCode);
}).on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span><span class="params">(e)</span> {</span>
    console.log(<span class="string">"Got error: "</span> + e.message);
});
</code></pre><h3 id="http-ClientRequest">http.ClientRequest</h3>
<p>http.ClientRequest �� Node �ڽ���һ�����󣬵��� http.request() �� http.get() ���صľ�����������������ʾһ���Ѿ������������ڽ��е� HTTP ���������ṩ��һ�� response �¼�������Ӧͷ�����յ�ʱ�򣬻��������Ķ����ϴ�����http.request() �� http.get() �ڶ�������ָ���Ļص������İ󶨶����������ˡ�http.ClientRequest �� http.ServerResponse һ���ṩ�� write() �� end() ���������������������塣���е�д�������������� end() ֪ͨ�����󡣸�����ϸ��Ϣ����<a href="http://nodejs.org/api/http.html#http_class_http_clientrequest" target="_blank">����</a>��</p>
<p>���� Node �е� HTTP ģ���϶���ֹ����˵������Щ��������������ֻ��һЩ���õ����ݣ�ͨ�����������򵥵����ݡ������빹�����ӵģ�ȫ���� Web ��������ԶԶ����������Ҫ��ʱ���෭��<a href="http://nodejs.org/api/http.html" target="_blank">�ֲ�</a>����������~</p>
  
	</div>
	<div class="blog-statement">
		<p>本博客所有博文皆为原创，转载请注明出处，谢谢</p>
		
	</div>
		<footer class="article-footer clearfix">

  <div class="article-tags">
  
  <span></span> <a href="/tags/����/">����</a><a href="/tags/Node.js/">Node.js</a>
  </div>




<div class="article-share" id="share">

  <div data-url="http://zhanglun.github.io/2014/05/12/笔记—Node.js核心API之HTTP/" data-title="�ʼ�-Node.js�еĺ���API֮HTTP | 张小伦爱学习" data-tsina="null" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 

<div class="next">
<a href="/2014/05/12/笔记—Nodejs核心API之Events/"  title="笔记-Nodejs中的核心API之Events">
 <strong>NEXT:</strong><br/> 
 <span>笔记-Nodejs中的核心API之Events
</span>
</a>
</div>

</nav>

	

	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="请将此处替换成文章在你的站点中的ID" data-title="请替换成文章的标题" data-url="请替换成文章的网址"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"crispelite"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP������"><span class="toc-number">1.</span> <span class="toc-text">HTTP������</span></a></li><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#http-Server"><span class="toc-number">1.1.</span> <span class="toc-text">http.Server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http-ServerResponse"><span class="toc-number">1.2.</span> <span class="toc-text">http.ServerResponse</span></a></li><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#response-writeHead(statusCode,_[header])"><span class="toc-number">1.2.1.</span> <span class="toc-text">response.writeHead(statusCode, [header])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#response-write(data,_[encoding])"><span class="toc-number">1.2.2.</span> <span class="toc-text">response.write(data, [encoding])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#response-end([data],_[encoding])"><span class="toc-number">1.2.3.</span> <span class="toc-text">response.end([data], [encoding])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Event:’close’"><span class="toc-number">1.2.4.</span> <span class="toc-text">Event:’close’</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Event:’finish’"><span class="toc-number">1.2.5.</span> <span class="toc-text">Event:’finish’</span></a></li></ol></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP�ͻ���"><span class="toc-number">2.</span> <span class="toc-text">HTTP�ͻ���</span></a></li><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#http-request(options,_callback)"><span class="toc-number">2.1.</span> <span class="toc-text">http.request(options, callback)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http-get(options,_callback)"><span class="toc-number">2.2.</span> <span class="toc-text">http.get(options, callback)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http-ClientRequest"><span class="toc-number">2.3.</span> <span class="toc-text">http.ClientRequest</span></a></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
			<li><a href="/categories/前端/" title="前端">前端<sup>5</sup></a></li>
		
			<li><a href="/categories/随笔/" title="随笔">随笔<sup>1</sup></a></li>
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			<li><a href="/tags/CSS/" title="CSS">CSS<sup>1</sup></a></li>
		
			<li><a href="/tags/JavaScript/" title="JavaScript">JavaScript<sup>1</sup></a></li>
		
			<li><a href="/tags/Node.js/" title="Node.js">Node.js<sup>7</sup></a></li>
		
			<li><a href="/tags/css/" title="css">css<sup>1</sup></a></li>
		
			<li><a href="/tags/sass/" title="sass">sass<sup>2</sup></a></li>
		
			<li><a href="/tags/web优化/" title="web优化">web优化<sup>3</sup></a></li>
		
			<li><a href="/tags/笔记/" title="笔记">笔记<sup>1</sup></a></li>
		
			<li><a href="/tags/译文/" title="译文">译文<sup>3</sup></a></li>
		
			<li><a href="/tags/随笔/" title="随笔">随笔<sup>1</sup></a></li>
		
			<li><a href="/tags/����/" title="����">����<sup>1</sup></a></li>
		
		</ul>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m CrispElite in Google. <br/>
			This is my blog, believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/2671026564" target="_blank" title="weibo"></a>
		
		
		
		<a href="https://github.com/zhanglun" target="_blank" title="github"></a>
		
		
	</div>
		<p class="copyright">Powered by <a href="http://zespia.tw/hexo/" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2014 
		
		<a href="http://zhanglun.github.io/" target="_blank" title="张小伦爱学习">张小伦爱学习</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>


<script type="text/javascript">
  var duoshuoQuery = {short_name:"null"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 





  </body>
</html>
