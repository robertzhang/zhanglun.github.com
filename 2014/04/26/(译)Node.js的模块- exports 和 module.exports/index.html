<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>(译)Node.js的模块-exports和module.exports | 张小伦爱学习</title>
  <meta name="author" content="张小伦爱学习">
  
  <meta name="description" content="原文标题：Node.js Module – exports vs module.exports 原文链接：http://www.hacksparrow.com/node-js-exports-vs-module-exports.html">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="(译)Node.js的模块-exports和module.exports"/>
  <meta property="og:site_name" content="张小伦爱学习"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="张小伦爱学习" type="application/atom+xml">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-368771XX-X']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>

<body>
  <header id="header" class='normal_mode'>
    <nav id="main-nav">
  <ul class='container'>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="/archives">存档</a></li>
    
      <li><a href="http://ncuey.sinaapp.com/CrispElite/">关于</a></li>
    
      <li><a href="https://github.com/zhanglun">Github</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
  </header>
  <div id="content" class="container">
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
      <time datetime="2014-04-26T11:45:00.000Z"><a href="/2014/04/26/(译)Node.js的模块- exports 和 module.exports/">周六, 4月 26 2014, 7:45:00 晚上</a></time>

  
    <h1 class="title">(译)Node.js的模块-exports和module.exports</h1>
  



  
  <div class="tags">
  	<i class="fa fa-tag"></i>
    <a href="/tags/译文/">译文</a>, <a href="/tags/Node.js/">Node.js</a>
  </div>

<div class="clear"></div>
      
    </header>
    <div class="entry">
      
        <blockquote>
<p>原文标题：Node.js Module – exports vs module.exports<br> 原文链接：<a href="http://www.hacksparrow.com/node-js-exports-vs-module-exports.html">http://www.hacksparrow.com/node-js-exports-vs-module-exports.html
</a></p>
</blockquote>
<a id="more"></a>

<h2 id="exports_和_module-exports_有什么区别？">exports 和 module.exports 有什么区别？</h2>
<p>你一定很熟悉 Node.js 模块中的用来在你的模块中创建函数的 exports 对象，就像下面这样。</p>
<p>创建一个叫做 <code>rocker.js</code> 的文件：</p>
<pre><code><span class="transposed_variable">exports.</span>name = <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
    <span class="transposed_variable">console.</span><span class="built_in">log</span>(<span class="string">'My name is Lemmy Kilmister'</span>);
};
</code></pre><p>然后可以在另外一个文件中调用 <code>rocker.js</code> :</p>
<pre><code>var rocker = <span class="keyword">require</span>(<span class="string">'./rocker.js'</span>);
rocker.name(); <span class="regexp">//</span> <span class="string">'My name is Lemmy Kilmister'</span>
</code></pre><p>但是，<code>module.exports</code> 到底什么？它是合法的吗？</p>
<p>令人吃惊的是：<code>module.exports</code> 是真实存在的。<code>exports</code>  只不过是 <code>module.exports</code> 的帮手而已。你的模块直接返回返回 <code>module.exports</code> 给调用者，而不是 <code>exports</code> 。所有的 <code>exports</code> 做的工作实际上是收集属性，如果 <code>module.exports</code> 当前没有任何属性，<code>exports</code>便将收集到的属性添加到 <code>module.exports</code> 上。如果 <code>module.exports</code><br>已经存在若干属性，所以 <code> exports</code> 上的属性都会被忽略。  </p>
<p>修改 <code>rocker.js</code> 文件：</p>
<pre><code><span class="built_in">module</span>.<span class="built_in">exports</span> = <span class="string">'ROCK IT!'</span>;
<span class="built_in">exports</span>.name = <span class="reserved">function</span>() {
    <span class="built_in">console</span>.log(<span class="string">'My name is Lemmy Kilmister'</span>);
};
</code></pre><p>在另一个文件中调用 <code>rocker.js</code>:</p>
<pre><code><span class="reserved">var</span> rocker = <span class="built_in">require</span>(<span class="string">'./rocker.js'</span>);
rocker.name(); <span class="regexp">//</span> <span class="attribute">TypeError</span>: Object ROCK IT! has <span class="literal">no</span> method <span class="string">'name'</span>
</code></pre><p>上述例子中的 <code>rocker</code> 模块完全将 <code>exports.name</code> 忽略了，只返回了一个 String 字符串：<code>‘ROCK IT!’</code> 。 从这个例子你大概明白了：你的模块并不一定总是一个模块的实例(module instance)，它可以是任何合法的 JavaScript 对象——boolean, number, date, JSON, string, function, array 和其他的。你的模块可以是任何你设置的  <code>module.exports</code> 的值。如果你没有明确地为  <code>module.exports</code> 设置任何值，那么 <code>exports</code> 中的属性会自动添加到 <code>module.exports<code> 中，然后并返回它。</p>
<p>在这种情况下，你的模块是一个类：</p>
<pre><code>module.exports = <span class="function"><span class="keyword">function</span><span class="params">(name, age)</span> {</span>
    <span class="keyword">this</span>.name = name;
    <span class="keyword">this</span>.age = age;
    <span class="keyword">this</span>.about = <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
        console.log(<span class="keyword">this</span>.name +<span class="string">' is '</span>+ <span class="keyword">this</span>.age +<span class="string">' years old'</span>);
    };
};
</code></pre><p>而你可以像这样使用：</p>
<pre><code><span class="keyword">var</span> Rocker = <span class="built_in">require</span>(<span class="string">'./rocker.js'</span>);
<span class="keyword">var</span> r = <span class="keyword">new</span> Rocker(<span class="string">'Ozzy'</span>, <span class="number">62</span>);
r.about(); <span class="comment">// Ozzy is 62 years old</span>
</code></pre><p>在这时候你的模块是一个数组：</p>
<pre><code><span class="built_in">module</span>.<span class="built_in">exports</span> = [
    <span class="string">'Lemmy Kilmister'</span>, 
    <span class="string">'Ozzy Osbourne'</span>, 
    <span class="string">'Ronnie James Dio'</span>, 
    <span class="string">'Steven Tyler'</span>, 
    <span class="string">'Mick Jagger'</span>
];
</code></pre><p>而你可以这样使用：</p>
<pre><code><span class="reserved">var</span> rocker = <span class="built_in">require</span>(<span class="string">'./rocker.js'</span>);
<span class="built_in">console</span>.log(<span class="string">'Rockin in heaven: '</span> + rocker[<span class="number">2</span>]); <span class="regexp">//</span>Rockin <span class="keyword">in</span> <span class="attribute">heaven</span>: Ronnie James Dio
</code></pre><p>现在你应该明白了点什么——如果你想让你的模块返回一个特殊的对象类型，比如构造函数，那么你得使用 <code>module.exports</code> ；如果你只想模块作为一个典型的模块实例（module instance），那么就用<code>exports</code>。 </p>
<p>把属性添加到 <code>module.exports</code> 中和添加到 <code>exports</code> 中的结果是一样的。比如像这样：</p>
<pre><code><span class="built_in">module</span>.exports.name = <span class="function"><span class="keyword">function</span><span class="params">()</span></span> {
    console.log(<span class="string">'My name is Lemmy Kilmister'</span>);
};
</code></pre><p>其实和下面的是一样的：</p>
<pre><code><span class="transposed_variable">exports.</span>name = <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
    <span class="transposed_variable">console.</span><span class="built_in">log</span>(<span class="string">'My name is Lemmy Kilmister'</span>);
};
</code></pre><p>但是要注意，他们不是同一个东西。就像之前说的一样，<code>exports</code>  只不过是 <code>module.exports</code> 的帮手而已。话虽如此，<code>exports</code> 还是推荐的对象，除非你想把你模块的对象类型从传统的模块实例（module instance）修改为其他的。</p>
<p>只要你没有使用赋值运算重写 <code>module.exports</code> 对象，任何添加到 <code>module.exports</code> 和 <code>exports</code> 的属性都能够在 <code>require</code> 模块中。</p>
<p>比如这是你的模块中的内容：</p>
<pre><code><span class="built_in">module</span>.<span class="built_in">exports</span>.age = <span class="number">68</span>;
<span class="built_in">exports</span>.name = <span class="string">'Lemmy Kilmister'</span>;
</code></pre><p>下面的代码可以很好的工作：</p>
<pre><code><span class="reserved">var</span> rocker = <span class="built_in">require</span>(<span class="string">'./rocker.js'</span>);
<span class="built_in">console</span>.log(<span class="string">'%s is %s'</span>, rocker.name, rocker.age); <span class="regexp">//</span> Lemmy Kilmister <span class="keyword">is</span> <span class="number">68</span>
</code></pre><p>但是，如果你在你的模块中重写了 <code>module.exports</code> 中的任何地方，代码便会出错：</p>
<pre><code><span class="built_in">module</span>.<span class="built_in">exports</span> = <span class="string">'LOL'</span>;
<span class="built_in">module</span>.<span class="built_in">exports</span>.age = <span class="number">68</span>;
<span class="built_in">exports</span>.name = <span class="string">'Lemmy Kilmister'</span>;
</code></pre><p>或者这样：</p>
<pre><code><span class="built_in">module</span>.<span class="built_in">exports</span>.age = <span class="number">68</span>;
<span class="built_in">exports</span>.name = <span class="string">'Lemmy Kilmister'</span>;
<span class="built_in">module</span>.<span class="built_in">exports</span> = <span class="string">'WTF'</span>;
</code></pre><p>顺序没有关系，<code>rocker.age</code> 和 <code>rocker.name</code> 将显示为 <code>undefined</code>。</p>
<p>并且注意：只是因为 <code>module.exports</code> 和  <code>exports</code> 都能输出模块，并不意味这你可以组合使用。我的建议是，坚持使用 <code>exports.*</code>，明白<code>module.exports</code> </p>
<p>我希望这篇文章能帮助你理解exports和module.exports之间的不同，并且能进一步的理解模块在Node.js中是怎么工作的。</p>
<p>(完)</p>
<p><strong>翻译水平有待提高，所翻译的博文并不是按照原文一句一句翻译，而是添加了自己对文章的理解。如有不正之处，欢迎指正！</strong><br><strong>个人笔记，仅供参考。</strong></p>
<blockquote>
<p>参考:<br><a href="http://www.hacksparrow.com/node-js-exports-vs-module-exports.html">http://www.hacksparrow.com/node-js-exports-vs-module-exports.html
</a></p>
</blockquote>

      
    </div>
    <footer>
      
          
<!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <span class="jiathis_txt">分享到：</span>
  <a class="jiathis_button_weixin">微信</a>
  <a class="jiathis_button_tsina">新浪微博</a>
  <a class="jiathis_button_renren">人人网</a>
  <a class="jiathis_button_qzone">QQ空间</a>
  <a class="jiathis_button_douban">豆瓣</a>
  <a class="jiathis_button_pocket">Pocket</a>
  <a href="http://www.jiathis.com/share?uid=901656" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" src="http://v3.jiathis.com/code_mini/jia.js?uid=901656" charset="utf-8"></script>
<!-- JiaThis Button END -->

          <div class="clearfix"></div>
          <nav id="pagination">
  
    <a href="/2014/04/28/(译)Node.js的全局变量/" class="alignleft prev"><i class="fa fa-long-arrow-left"></i>Next</a>
  
  
    <a href="/2014/04/25/Node.js入门-Node.js中的模块和包/" class="alignright next">Prev<i class="fa fa-long-arrow-right"></i></a>
  
  <div class="clearfix"></div>
</nav>
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">留言</h1>



	<!-- 多说评论框 start -->
<div class="ds-thread" data-thread-key="/2014/04/26/(译)Node.js的模块- exports 和 module.exports/"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"crispelite"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->

</section>



    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div>
  
  &copy; 2014 张小伦爱学习
  
</div>
Powered by <a href="http://zespia.tw/hexo/" title="Hexo" target="_blank" rel="external">Hexo</a> and <a href="http://pages.github.com/" title="GitHub Pages" target="_blank" rel="external">GitHub Pages</a>

<div class="clearfix"></div></footer>
  
<script type="text/javascript" src="/js/jquery.imagesloaded.min.js"></script>
<script type="text/javascript" src="/js/gallery.js"></script>
<script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>




    <script type="text/javascript">
        (function(){

            $(window).scroll(function(){

                var scrollTop = $(window).scrollTop();
                if ( scrollTop >200 ){
                    $("#main-nav").removeClass('normal_mode').addClass('top_mode');
                } else{
                    $("#main-nav").removeClass('top_mode').addClass('normal_mode');
                }

            });

        })();
    </script>



  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript">
  (function($){
    $('.fancybox').fancybox({
      'titlePosition': 'inside'
    });
  })(jQuery);
  </script>



    
    <script type="text/javascript">
      var duoshuoQuery = {short_name:"CrispElite"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = 'http://static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0] 
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>



<script type="text/javascript">
  
  $(function(){

    $('.title').hover(
      function() {      
        $(this).stop().animate(
          {'marginLeft': '10px'}, 200
        );   
      }, 
      function() {       
        $(this).stop().animate({'marginLeft': '0px'}, 200);      
      
    });   

  });

</script>


</body>
</html>